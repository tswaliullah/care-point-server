model Appoinment {
  id             String           @id @default(uuid())
  patientId      String
  patient        Patient          @relation(fields: [patientId], references: [id])
  doctorId       String
  doctor         Doctor           @relation(fields: [doctorId], references: [id])
  scheduleId     String
  schedule       Schedule         @relation(fields: [scheduleId], references: [id])
  videoCallingId String
  status         AppoinmentStatus @default(SCHEDULED)
  paymentStatus  PaymentStatus    @default(UNPAID)
  createAt       DateTime         @default(now())
  updateAt       DateTime         @updatedAt

  payment      Payment?
  prescription Prescription?
  review         Review?

  @@map("appoinments")
}

model Payment {
  id                 String        @id @default(uuid())
  appoinmentId       String        @unique
  appoinment         Appoinment    @relation(fields: [appoinmentId], references: [id])
  amount             Float
  transactionId      String
  status             PaymentStatus @default(UNPAID)
  paymentGateWayData Json?
  createAt           DateTime      @default(now())
  updateAt           DateTime      @updatedAt

  @@map("payments")
}

model Prescription {
  id           String     @id @default(uuid())
  appoinmentId String     @unique
  appoinment   Appoinment @relation(fields: [appoinmentId], references: [id])
  doctorId     String
  doctor       Doctor     @relation(fields: [doctorId], references: [id])
  patientId    String
  patient      Patient    @relation(fields: [patientId], references: [id])
  instructions String
  followUpDate DateTime
  createAt     DateTime   @default(now())
  updateAt     DateTime   @updatedAt

  @@map("prescription")
}

model Review {
    id            String      @id @default(uuid())
    patientId     String
    patient       Patient     @relation(fields: [patientId], references: [id])
    doctorId      String
    doctor        Doctor      @relation(fields: [doctorId], references: [id])
    appointmentId String      @unique
    appointment   Appoinment @relation(fields: [appointmentId], references: [id])
    rating        Int
    comment       String?
    createdAt     DateTime    @default(now())
    updatedAt     DateTime    @updatedAt

    @@map("reviews")
}